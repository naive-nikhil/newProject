---
import "@splidejs/splide/dist/css/splide.min.css";
---

<style>
  /* keep your styles (Tailwind is fine too) */
  .splide-wrapper {
    width: 80%;
    margin: 0 auto;
  }
  .splide-card {
    background: #f5f4fb;
    padding: 2rem;
    border-radius: 1rem;
  }
  .splide-quote {
    font-size: 1.5rem;
    line-height: 1.15;
    color: #4b5563;
  }
  .splide-controls {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    margin-top: 1rem;
  }
  .splide-btn {
    width: 2rem;
    height: 2rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: #000;
    color: #fff;
    border-radius: 0.5rem;
  }
  .splide-btn:hover {
    background: #374151;
  }
</style>

<div class="splide-wrapper">
  <!-- standard Splide HTML structure -->
  <div id="my-splide" class="splide" aria-label="Testimonials">
    <div class="splide__track">
      <ul class="splide__list">
        <li class="splide__slide">
          <div
            class="flex flex-col md:flex-row max-w-5xl mx-auto shadow-xl rounded-2xl overflow-hidden"
          >
            <div
              class="flex items-center justify-center p-8 md:p-16 mr-6 splide-card w-full md:w-1/3 min-h-[250px]"
            >
              <svg width="120" height="120" viewBox="0 0 200 200" aria-hidden>
                <circle cx="100" cy="100" r="80" fill="#e6e4ff"></circle>
              </svg>
            </div>
            <div
              class="flex flex-col justify-center p-8 md:p-16 bg-[#f5f4fb] rounded-2xl w-full md:w-2/3"
            >
              <blockquote
                class="text-3xl sm:text-4xl font-normal text-gray-600 leading-snug mb-6 splide-quote"
              >
                “In less than a month, we saved thousands of dollars (23%) of
                our total AWS bill.”
              </blockquote>
              <div class="text-sm">
                <p class="font-semibold text-violet-700 mb-0">
                  Alexandre Walsh
                </p>
                <p class="text-sm text-gray-600">
                  Co-Founder & Engineering VP, @ Nexapp and Axify
                </p>
              </div>
            </div>
          </div>
        </li>

        <li class="splide__slide">
          <!-- second slide content -->
          <div
            class="flex flex-col md:flex-row max-w-5xl mx-auto shadow-xl rounded-2xl overflow-hidden"
          >
            <div
              class="flex items-center justify-center p-8 md:p-16 mr-6 splide-card w-full md:w-1/3 min-h-[250px]"
            >
              <svg width="120" height="120" viewBox="0 0 200 200" aria-hidden>
                <rect
                  width="120"
                  height="120"
                  x="40"
                  y="40"
                  rx="20"
                  fill="#e6e4ff"></rect>
              </svg>
            </div>
            <div
              class="flex flex-col justify-center p-8 md:p-16 bg-[#f5f4fb] rounded-2xl w-full md:w-2/3"
            >
              <blockquote
                class="text-3xl sm:text-4xl font-normal text-gray-600 leading-snug mb-6 splide-quote"
              >
                “Their automated checks uncovered idle instances we’d missed for
                months.”
              </blockquote>
              <div class="text-sm">
                <p class="font-semibold text-violet-700 mb-0">Priya Singh</p>
                <p class="text-sm text-gray-600">
                  Head of Platform, ExampleCorp
                </p>
              </div>
            </div>
          </div>
        </li>

        <!-- add more .splide__slide items here -->
      </ul>
    </div>
  </div>

  <!-- custom controls -->
  <div class="splide-controls">
    <button class="splide-btn" id="splide-prev" aria-label="Previous">
      <!-- left icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-4 h-4"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>

    <button class="splide-btn" id="splide-next" aria-label="Next">
      <!-- right icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-4 h-4"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
  </div>
</div>

<!-- This script runs only in the browser -->
<script type="module" client:load>
  import Splide from "@splidejs/splide";

  // Wait for DOM — client:load already ensures browser, but DOMContentLoaded is safe.
  document.addEventListener("DOMContentLoaded", () => {
    const el = document.getElementById("my-splide");
    if (!el) return;

    const splide = new Splide(el, {
      type: "loop",
      perPage: 1,
      autoplay: true,
      pauseOnHover: true,
      interval: 4000,
      gap: "1rem",
      pagination: true,
      arrows: false, // we use custom buttons
      breakpoints: { 900: { perPage: 1 }, 1200: { perPage: 1 } },
    });

    splide.mount();

    // wire custom buttons
    const prevBtn = document.getElementById("splide-prev");
    const nextBtn = document.getElementById("splide-next");
    if (prevBtn) prevBtn.addEventListener("click", () => splide.go("<"));
    if (nextBtn) nextBtn.addEventListener("click", () => splide.go(">"));
  });
</script>
