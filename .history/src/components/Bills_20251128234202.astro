---
import "@splidejs/splide/dist/css/splide-core.min.css"; // Splide core CSS
---

<style>
  /* fixed (non-nested) media queries + your styles */
  .mainDiv h2 {
    font-size: 1.5rem;
    line-height: 2.25rem;
    text-align: center;
  }

  @media (min-width: 780px) {
    .mainDiv h2 {
      font-size: 2.75rem;
      line-height: 4.25rem;
      text-align: left;
    }
  }

  @media (min-width: 1200px) {
    .mainDiv h2 {
      font-size: 2rem;
    }
  }

  @media (min-width: 1400px) {
    .mainDiv h2 {
      font-size: 3.7rem;
    }
  }

  .splide-wrapper {
    width: 80%;
    margin: 0 auto;
  }
  .splide-card {
    background: #f5f4fb;
    padding: 2rem;
    border-radius: 1rem;
  }
  .splide-quote {
    font-size: 1.5rem;
    line-height: 1.15;
    color: #4b5563;
  }
  .splide-meta {
    color: #6b21a8;
    font-weight: 600;
  }
  .splide-controls {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    margin-top: 1rem;
  }
  .splide-btn {
    width: 2rem;
    height: 2rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: #000;
    color: #fff;
    border-radius: 0.5rem;
  }
  .splide-btn:hover {
    background: #374151;
  }
</style>

<!-- Intro content (unchanged, cleaned CSS above handles media queries) -->
<div
  class="w-screen flex justify-center overflow-x-hidden"
  data-scroll-speed="1"
  data-scroll
  data-scroll-offset="100"
>
  <div class="bg-white w-[80%] py-6 font-san mainDiv">
    <h2 class="text-[1.5rem] text-[#474747] mb-10">
      Consistently save on your AWS bills
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16 max-w-5xl">
      <p class="text-lg text-gray-700 leading-relaxed font-light">
        With Stable, it's not just one-and-done savings.
        <br /><br />
        AWS rolls out new advisories, services, and resources at a breakneck pace,
        which means cost optimization is an endless work in progress.
      </p>

      <p class="text-lg text-gray-700 leading-relaxed font-light">
        But with projects to deliver and timelines to keep in check, who has got
        your back to keep scanning and saving on what you dish out every month?
        <strong>Stable.</strong>
      </p>
    </div>
  </div>
</div>

<!-- Splide core slideshow structure -->
<div
  class="font-sans py-10"
  data-scroll-speed="1"
  data-scroll
  data-scroll-offset="100"
>
  <div class="splide-wrapper">
    <div id="core-splide" class="splide" aria-label="Testimonials">
      <div class="splide__track">
        <ul class="splide__list">
          <!-- Slide 1 -->
          <li class="splide__slide">
            <div
              class="flex flex-col md:flex-row max-w-5xl mx-auto shadow-xl rounded-2xl overflow-hidden"
            >
              <div
                class="flex items-center justify-center p-8 md:p-16 mr-6 splide-card w-full md:w-1/3 min-h-[250px]"
              >
                <!-- SVG or image -->
                <svg width="120" height="120" viewBox="0 0 200 200" aria-hidden>
                  <circle cx="100" cy="100" r="80" fill="#e6e4ff"></circle>
                </svg>
              </div>

              <div
                class="flex flex-col justify-center p-8 md:p-16 bg-[#f5f4fb] rounded-2xl w-full md:w-2/3"
              >
                <blockquote
                  class="text-3xl sm:text-4xl font-normal text-gray-600 leading-snug mb-6 splide-quote"
                >
                  “In less than a month, we saved thousands of dollars (23%) of
                  our total AWS bill.”
                </blockquote>
                <div class="text-sm">
                  <p class="font-semibold text-violet-700 mb-0 splide-meta">
                    Alexandre Walsh
                  </p>
                  <p class="text-sm text-gray-600">
                    Co-Founder & Engineering VP, @ Nexapp and Axify
                  </p>
                </div>
              </div>
            </div>
          </li>

          <!-- Slide 2 -->
          <li class="splide__slide">
            <div
              class="flex flex-col md:flex-row max-w-5xl mx-auto shadow-xl rounded-2xl overflow-hidden"
            >
              <div
                class="flex items-center justify-center p-8 md:p-16 mr-6 splide-card w-full md:w-1/3 min-h-[250px]"
              >
                <svg width="120" height="120" viewBox="0 0 200 200" aria-hidden>
                  <rect
                    width="120"
                    height="120"
                    x="40"
                    y="40"
                    rx="20"
                    fill="#e6e4ff"></rect>
                </svg>
              </div>

              <div
                class="flex flex-col justify-center p-8 md:p-16 bg-[#f5f4fb] rounded-2xl w-full md:w-2/3"
              >
                <blockquote
                  class="text-3xl sm:text-4xl font-normal text-gray-600 leading-snug mb-6 splide-quote"
                >
                  “Their automated checks uncovered idle instances we’d missed
                  for months.”
                </blockquote>
                <div class="text-sm">
                  <p class="font-semibold text-violet-700 mb-0 splide-meta">
                    Priya Singh
                  </p>
                  <p class="text-sm text-gray-600">
                    Head of Platform, ExampleCorp
                  </p>
                </div>
              </div>
            </div>
          </li>

          <!-- Add more <li class="splide__slide"> slides here -->
        </ul>
      </div>
    </div>

    <!-- custom controls (wired by script below) -->
    <div class="splide-controls mt-8">
      <button class="splide-btn" id="splide-prev" aria-label="Previous">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-4 h-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>

      <button class="splide-btn" id="splide-next" aria-label="Next">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-4 h-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"></path>
        </svg>
      </button>
    </div>
  </div>
</div>

<!-- Client-only script: mounts Splide in the browser -->
<script type="module">
  import Splide from "@splidejs/splide";

  // Use DOMContentLoaded as extra safety if needed
  document.addEventListener("DOMContentLoaded", () => {
    const el = document.getElementById("core-splide");
    if (!el) return;

    const splide = new Splide(el, {
      type: "loop",
      perPage: 1,
      gap: "1rem",
      autoplay: true,
      interval: 4000,
      pauseOnHover: true,
      pagination: true,
      arrows: false, // using custom buttons
      breakpoints: {
        900: { perPage: 1 },
        1200: { perPage: 1 },
      },
    });

    splide.mount();

    // wire custom buttons
    const prev = document.getElementById("splide-prev");
    const next = document.getElementById("splide-next");
    if (prev) prev.addEventListener("click", () => splide.go("<"));
    if (next) next.addEventListener("click", () => splide.go(">"));
  });
</script>
