---
import blobShape1 from "../assets/blob_shape1.svg";
import blobShape2 from "../assets/blob_shape2.svg";
---

<style>
  /* Reuse your responsive font sizes */
  @media (min-width: 780px) {
    .mainDiv h2 {
      font-size: 2.75rem;
      line-height: 4.25rem;
    }
  }
  @media (min-width: 1200px) {
    .mainDiv h2 {
      font-size: 2rem;
    }
  }
  @media (min-width: 1400px) {
    .mainDiv h2 {
      font-size: 4rem;
    }
  }
</style>

<div
  id="contact-root"
  class="w-screen py-20 relative overflow-x-clip px-4 flex justify-center items-center"
>
  <img
    id="contact-blob1"
    src={blobShape1.src}
    alt=""
    class="absolute -top-10 -left-20 max-w-[300px] sm:max-w-[500px] rotate-10 pointer-events-none z-0 opacity-80"
  />
  <img
    id="contact-blob2"
    src={blobShape2.src}
    alt=""
    class="absolute top-40 -right-20 sm:top-20 sm:-right-10 max-w-[320px] sm:max-w-[550px] rotate-10 pointer-events-none z-0 opacity-80"
  />

  <div class="w-full max-w-4xl relative z-10">
    <div
      class="mainDiv w-full bg-white/60 backdrop-blur-md border-2 border-white rounded-3xl p-6 md:p-12 lg:p-16 shadow-xl shadow-[#047bca]/10"
    >
      <h2
        class="text-[2.5rem] leading-[3rem] font-bold text-center mb-8 text-black/80"
      >
        Got questions?
      </h2>

      <form id="contactForm" class="space-y-6" novalidate>
        <div>
          <label
            for="full-name"
            class="block text-sm font-semibold text-slate-600 mb-2 pl-1"
            >Full name</label
          >
          <input
            id="full-name"
            name="full-name"
            required
            type="text"
            class="block w-full rounded-xl border-2 border-transparent bg-white/50 px-4 py-3 text-slate-800 placeholder:text-slate-400 focus:border-[#047bca]/30 focus:bg-white focus:outline-none transition-all duration-300 shadow-sm"
            placeholder="John Doe"
          />
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label
              for="email"
              class="block text-sm font-semibold text-slate-600 mb-2 pl-1"
              >Email</label
            >
            <input
              id="email"
              name="email"
              required
              type="email"
              class="block w-full rounded-xl border-2 border-transparent bg-white/50 px-4 py-3 text-slate-800 placeholder:text-slate-400 focus:border-[#047bca]/30 focus:bg-white focus:outline-none transition-all duration-300 shadow-sm"
              placeholder="john@example.com"
            />
          </div>

          <div>
            <label
              for="telephone"
              class="block text-sm font-semibold text-slate-600 mb-2 pl-1"
              >Telephone</label
            >
            <input
              id="telephone"
              name="telephone"
              type="tel"
              class="block w-full rounded-xl border-2 border-transparent bg-white/50 px-4 py-3 text-slate-800 placeholder:text-slate-400 focus:border-[#047bca]/30 focus:bg-white focus:outline-none transition-all duration-300 shadow-sm"
              placeholder="+1 (555) 000-0000"
            />
          </div>
        </div>

        <div>
          <label
            for="message"
            class="block text-sm font-semibold text-slate-600 mb-2 pl-1"
            >Message</label
          >
          <textarea
            id="message"
            name="message"
            rows="5"
            required
            class="block w-full rounded-xl border-2 border-transparent bg-white/50 px-4 py-3 text-slate-800 placeholder:text-slate-400 focus:border-[#047bca]/30 focus:bg-white focus:outline-none transition-all duration-300 shadow-sm resize-none"
            placeholder="How can we help you?"
          ></textarea>
        </div>

        <div class="flex items-center pt-2 pl-1">
          <input
            id="terms"
            name="terms"
            type="checkbox"
            required
            class="h-5 w-5 rounded border-gray-300 text-[#047bca] focus:ring-[#047bca]"
          />
          <label for="terms" class="ml-3 text-sm text-slate-500">
            I accept the <a href="#" class="text-[#047bca] font-medium hover:underline">terms</a>.
          </label>
        </div>

        <div class="pt-4">
          <button
            id="submitBtn"
            type="submit"
            class="w-full py-4 rounded-xl text-white font-bold tracking-wide bg-[#047bca] hover:bg-[#03609e] shadow-lg shadow-[#047bca]/20 transition-all duration-300 transform hover:-translate-y-1"
          >
            Send Message
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script type="module" defer>
  import gsap from "https://cdn.jsdelivr.net/npm/gsap@3.12.5/index.js";
  import { ScrollTrigger } from "https://cdn.jsdelivr.net/npm/gsap@3.12.5/ScrollTrigger.min.js";

  gsap.registerPlugin(ScrollTrigger);

  const contactSection = document.querySelector("#contact-root");
  const contactBlob1 = document.querySelector("#contact-blob1");
  const contactBlob2 = document.querySelector("#contact-blob2");

  // Only run if elements exist to avoid null errors
  if (contactSection && contactBlob1 && contactBlob2) {
    
    // Animate Blob 1 (Left)
    gsap.to(contactBlob1, {
      y: 200, // Moves down
      opacity: 0,
      duration: 2,
      scrollTrigger: {
        trigger: contactSection,
        start: "top bottom", // Starts when section top hits viewport bottom
        end: "bottom top",   // Ends when section bottom hits viewport top
        scrub: 1,            // Smooth scrubbing
      },
    });

    // Animate Blob 2 (Right) - slightly faster movement for depth
    gsap.to(contactBlob2, {
      y: 350,
      opacity: 0,
      duration: 2,
      scrollTrigger: {
        trigger: contactSection,
        start: "top bottom",
        end: "bottom top",
        scrub: 1.5,
      },
    });
  }
</script>