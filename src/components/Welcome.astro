---
import blobShape1 from "../assets/blob_shape1.svg";
import blobShape2 from "../assets/blob_shape2.svg";
---

<style>
  /* iOS-safe overflow handling for blobs */
  .hero-blob-container {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
    z-index: -1;
  }
</style>

<div
  id="hero-root"
  class="flex align-center justify-center h-[60vh] lg:h-[95vh] items-center w-full relative px-4"
  style="overflow: hidden; overflow: clip;"
>
  <!-- Hero Image -->
  <div class="w-full flex justify-center items-center relative z-10">
    <div
      class="w-full max-w-sm sm:max-w-3xl lg:max-w-7xl rounded-xl lg:rounded-3xl backdrop-blur-[1px] h-[25vh] lg:h-[50vh] border-2 border-white flex justify-center px-5"
    >
      <h1
        class="text-3xl sm:text-6xl lg:text-8xl max-w-[1000px] m-auto h-full w-full py-2 font-bold text-center text-black/80 flex flex-col items-center justify-center"
      >
        <span id="text1" class="mr-auto text-[#006cb7]">Next-Gen</span>
        <span id="text2" class="ml-auto text-[#f38023]">Digital Solutions</span>
      </h1>
    </div>
  </div>

  <!-- Blobs wrapped in overflow container -->
  <div class="hero-blob-container">
    <img
      id="blob-shape1"
      src={blobShape1.src}
      alt=""
      class="absolute top-0 sm:-top-10 left-0 -translate-x-1/4 max-w-62 sm:max-w-150 rotate-10 pointer-events-none"
    />
    <img
      id="blob-shape2"
      src={blobShape2.src}
      alt=""
      class="absolute top-25 sm:-top-10 right-0 translate-x-1/4 sm:translate-x-0 max-w-65 sm:max-w-180 rotate-10 pointer-events-none"
    />
  </div>
</div>

<script type="module" defer>
  import gsap from "https://cdn.jsdelivr.net/npm/gsap@3.12.5/index.js";
  import { ScrollTrigger } from "https://cdn.jsdelivr.net/npm/gsap@3.12.5/ScrollTrigger.min.js";

  gsap.registerPlugin(ScrollTrigger);

  const hero = document.querySelector("#hero-root");

  const blobShape1 = document.querySelector("#blob-shape1");
  const blobShape2 = document.querySelector("#blob-shape2");

  if (blobShape1 && blobShape2) {
    gsap.to(blobShape1, {
      y: 300,
      opacity: 0,
      duration: 2,
      scrollTrigger: {
        trigger: hero,
        start: "top-=90px",
        end: "bottom",
        scrub: true,
      },
    });

    gsap.to(blobShape2, {
      y: 500,
      opacity: 0,
      duration: 2,
      scrollTrigger: {
        trigger: hero,
        start: "top-=90px",
        end: "bottom",
        scrub: true,
      },
    });
  }
</script>
